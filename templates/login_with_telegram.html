<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram</title>
</head>
<body>
  <h1>–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram</h1>

  <!-- üí• –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ Telegram –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É -->
  <script>
    window.TelegramLoginWidgetCallback = function(user) {
      console.log("üî• –í–æ—à—ë–ª —á–µ—Ä–µ–∑ Telegram:", user);

      fetch("https://c20a-46-251-204-19.ngrok-free.app/api/telegram-login/", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(user)
      })
      .then(res => res.json())
      .then(data => {
        console.log("üéüÔ∏è ACCESS TOKEN:", data.access);
        console.log("üîÅ REFRESH TOKEN:", data.refresh);
        alert("–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥! JWT: " + data.access);
      })
      .catch(err => console.error("‚ùå –û—à–∏–±–∫–∞:", err));
    };
  </script>

  <!-- üëá Telegram –≤–∏–¥–∂–µ—Ç (–≤—ã–∑–æ–≤–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤—ã—à–µ) -->
  <script async src="https://telegram.org/js/telegram-widget.js?7"
          data-telegram-login="tourlogin_auth_bot"
          data-size="large"
          data-userpic="false">
  </script>
</body>
</html>
